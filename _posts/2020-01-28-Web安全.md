---
layout:     post   				    # 使用的布局（不需要改）
title:      Web安全				# 标题 
#subtitle:   Hello World, Hello Blog #副标题
date:       2020-01-28				# 时间
author:     Teng 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 安全
---
## Web安全
### XSS
XSS，跨站脚本攻击，XSS原理是恶意攻击者往Web页面里插入可执行网页脚本代码，当用户浏览该页时，嵌入其中的脚本代码会被执行，从而达到盗取用户信息侵犯用户安全隐私的目的。

可以分为持久型与非持久型：

持久型 XSS 漏洞，也被称为存储型 XSS 漏洞，一般存在于Form表单等交互功能，黑客利用XSS漏洞，将攻击代码提交进入数据库持久保存，当前端页面获得后端从数据库中读出的注入代码时，恰好将其渲染执行。

非持久型漏洞，也叫反射型 XSS 漏洞，一般是通过给别人发送带有恶意脚本代码参数的 URL，当 URL 地址被打开时，特有的恶意代码参数被 HTML 解析、执行。

***如何防范XSS攻击？***

转义字符：转义输入输出的内容，对于引号、尖括号、斜杠等进行转义。

![aq1.png](https://i.loli.net/2020/03/04/gbC3V1TpKkLfxIU.png)

CSP白名单：明确告诉浏览器那些外部资源可以加载和执行。通过两种方式开启CSP：

1.设置HTTP Header中的```Content-Security-Policy```

2.设置meta标签的方式```<meta http-equiv="Content-Security-Policy>"```

### CSRF
CSRF,跨站请求伪造攻击，本质在于利用用户的身份，执行非本意的操作。

跨站请求伪造的攻击是攻击者通过一些技术手段欺骗用户的浏览器去访问用户曾经认证过的网站并执行一些操作（如发送邮件、发消息、甚至财产操作如转账和购买商品等）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。这利用了web登录身份认证的一个漏洞：简单的身份认证只能保证请求来自用户的浏览器，但不能识别请求是用户自愿发出的。

***如何防范CSRF攻击？***

增加验证，如短信验证，指纹等；敏感接口使用POST接口而不是GET接口。

### 点击劫持

点击劫持，也被称为UI-覆盖攻击，它通过覆盖不可见的框架误导用户点击，虽然用户点击的是他所看到的网页，但其实他点击的是黑客精心构建的另一个置于原页面之上的透明页面，这种攻击利用了HTML中```<ifram>```标签的透明属性。

***如何防范点击劫持？***

设置HTTP头：X-Frame-Options

该响应头有三个值可选，分别是:

DENY，表示页面不允许通过 iframe 的方式展示

SAMEORIGIN，表示页面可以在相同域名下通过 iframe 的方式展示

ALLOW-FROM，表示页面可以在指定来源的 iframe 中展示

JS防御：判断顶层视口的域名是不是和本页面的域名一致，如果不一致就让恶意网页自动跳转到我方页面。
```js
if(top.location.hostname !==self.location.hostname) {
    alert('您正在访问不安全的页面，即将跳转到安全页面！')
    top.location.href = self.location.href;
}
```
### 中间人攻击
中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。

***如何防范中间人攻击？***

防御中间人攻击其实并不难，只需要增加一个安全通道来传输信息。HTTPS 就可以用来防御中间人攻击，但是并不是说使用了 HTTPS 就可以高枕无忧了，因为如果你没有完全关闭 HTTP 访问的话，攻击方可以通过某些方式将 HTTPS 降级为 HTTP 从而实现中间人攻击。

